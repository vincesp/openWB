(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{214:function(e,t,r){var content=r(221);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(83).default)("35cce301",content,!0,{sourceMap:!1})},215:function(e,t,r){var content=r(224);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(83).default)("1147586a",content,!0,{sourceMap:!1})},216:function(e,t,r){var content=r(226);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(83).default)("0ace817b",content,!0,{sourceMap:!1})},217:function(e,t,r){"use strict";var o=r(7),n=r(38),l=r(44),c=r(108),d=r(84),f=r(18),m=r(65).f,h=r(86).f,v=r(16).f,x=r(218).trim,y=o.Number,w=y,k=y.prototype,_="Number"==l(r(85)(k)),S="trim"in String.prototype,L=function(e){var t=d(e,!1);if("string"==typeof t&&t.length>2){var r,o,n,l=(t=S?t.trim():x(t,3)).charCodeAt(0);if(43===l||45===l){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+t}for(var code,c=t.slice(2),i=0,f=c.length;i<f;i++)if((code=c.charCodeAt(i))<48||code>n)return NaN;return parseInt(c,o)}}return+t};if(!y(" 0o1")||!y("0b1")||y("+0x1")){y=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof y&&(_?f((function(){k.valueOf.call(r)})):"Number"!=l(r))?c(new w(L(t)),r,y):L(t)};for(var C,N=r(12)?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;N.length>D;D++)n(w,C=N[D])&&!n(y,C)&&v(y,C,h(w,C));y.prototype=k,k.constructor=y,r(19)(o,"Number",y)}},218:function(e,t,r){var o=r(8),n=r(45),l=r(18),c=r(219),d="["+c+"]",f=RegExp("^"+d+d+"*"),m=RegExp(d+d+"*$"),h=function(e,t,r){var n={},d=l((function(){return!!c[e]()||"​"!="​"[e]()})),f=n[e]=d?t(v):c[e];r&&(n[r]=f),o(o.P+o.F*d,"String",n)},v=h.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(f,"")),2&t&&(e=e.replace(m,"")),e};e.exports=h},219:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},220:function(e,t,r){"use strict";var o=r(214);r.n(o).a},221:function(e,t,r){(t=r(82)(!1)).push([e.i,".bar-gauge{display:grid;grid-template-columns:1fr;grid-template-rows:1fr -webkit-max-content;grid-template-rows:1fr max-content;grid-gap:5px;gap:5px;padding:5px 0;position:relative;box-sizing:border-box}.bar-gauge,.frame{border-radius:2.125rem}.frame{position:absolute;width:100%;height:100%;z-index:1000;display:none;box-sizing:border-box}.zero-line{position:absolute;left:-2.5px;right:-2.5px;height:1px;transform:translateY(-50%)}.track,.zero-line{background-color:#474747}.track{position:relative}.bar{position:absolute;background-color:#fff}.bar-chart{position:relative}.bar-watt{position:absolute;top:0;bottom:0;left:50%;transform:translate(-50%);width:2.375rem}.vertical{position:absolute;width:2rem;right:0}.axis.color-green{background-color:#179e58}.axis.color-yellow{background-color:#b2b00c}.axis.color-red{background-color:#a51e00}.axis.color-white{background-color:#b9b9b9}.bar.color-green{background-color:#24db7c}.bar.color-yellow{background-color:#ebe914}.bar.color-red{background-color:#ff3500}.bar.color-white{background-color:#f1f1f1}.color-green{color:#24db7c}.color-yellow{color:#ebe914}.color-red{color:#ff3500}.axis.vertical{width:.25rem;left:0;right:auto}.description-area{display:grid;grid-gap:5px;gap:5px;grid-auto-flow:row dense;justify-items:center}.value-area{text-align:center}.big-value{display:inline-block;font-size:2rem;line-height:1em;position:relative}.big-value .space-measure{visibility:hidden}.big-value .display-value{position:absolute;right:0;top:0}.value-label{height:1.1em}.soc-area{width:100%;text-align:center}.track.tiny-horizontal{height:.25rem;margin:0 .4375rem}.track.tiny-horizontal .bar{height:100%}.bar-gauge.selectable{background-color:#001e2f;color:#b2d8ff}.bar-gauge.selectable .frame{border:1px solid #007db5;display:block}.bar-gauge.selectable .bar{background-color:#b2d8ff}.bar-gauge.selectable:active{background-color:#00344e;color:#cde5ff}.bar-gauge.selectable:active .frame{border:1px solid #09d}.bar-gauge.selectable:active .bar{background-color:#cde5ff}.bar-gauge.selectable.selected{background-color:#3b3b3b;color:#fff}.bar-gauge.selectable.selected .frame{border:1px solid #fff}.bar-gauge.selectable.selected .track{background-color:#000}.bar-gauge.selectable.selected .bar{background-color:#fff}.bar-gauge.selectable.selected:active{background-color:#00293f;color:#cde5ff}.bar-gauge.selectable.selected:active .frame{border:1px solid #cde5ff}.bar-gauge.selectable.selected:active .bar{background-color:#cde5ff}",""]),e.exports=t},222:function(e,t,r){var o=r(8),n=r(150)(!1);o(o.S,"Object",{values:function(e){return n(e)}})},223:function(e,t,r){"use strict";var o=r(215);r.n(o).a},224:function(e,t,r){(t=r(82)(!1)).push([e.i,".chart-area{display:grid;grid-gap:5px;gap:5px;grid-auto-flow:column dense;grid-auto-columns:1fr}",""]),e.exports=t},225:function(e,t,r){"use strict";var o=r(216);r.n(o).a},226:function(e,t,r){(t=r(82)(!1)).push([e.i,"button{background-color:#007db5;color:#fff;font-weight:400;font-size:1.5rem;height:4.25rem;border:none;box-sizing:border-box;border-radius:2.125rem;line-height:1.1em}button:active{background-color:#09d}button.selected{background-color:#fff;color:#007db5}button.selected:active{background-color:#cde5ff;color:#006492}.error button{background-color:#e12f00;color:#fff}.error button:active{background-color:#ff5542}.error button.selected{background-color:#fff;color:#e12f00}.error button.selected:active{background-color:#ffdad8;color:#b62400}.container{position:fixed;grid-template-columns:1fr;grid-template-rows:1fr -webkit-max-content;grid-template-rows:1fr max-content;width:100%;height:100%}.buttonbar,.container{display:grid;grid-gap:5px;gap:5px}.buttonbar{grid-auto-flow:column dense;grid-auto-columns:1fr}.buttonbar>:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.buttonbar>:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}",""]),e.exports=t},227:function(e,t,r){"use strict";r.r(t);r(20);var o=r(4),n=r(17),l=(r(25),r(13),r(149),r(217),{props:{name:String,value:Number,minValue:Number,maxValue:Number,negativLabel:String,positivLabel:String,zeroLabel:String,labelOverride:String,ranges:Object,selectable:{type:Boolean,default:!1},selected:Boolean,showAmps:{type:Boolean,default:!1},ampValue:Number,showSoc:{type:Boolean,default:!1},soc:Number},inject:["limits","setUpperLimit","setLowerLimit"],watch:{minValue:{immediate:!0,handler:function(e){this.setLowerLimit(this,e)}},maxValue:{immediate:!0,handler:function(e){this.setUpperLimit(this,e)}}},computed:{displayValue:function(){return Math.abs(this.value||0)},label:function(){return this.labelOverride||(this.value<0?this.negativLabel:this.value>0?this.positivLabel:this.zeroLabel||"")},socStyle:function(){return{visibility:this.showSoc?"visible":"hidden"}},socBarStyle:function(){return{width:"".concat(this.soc,"%")}},zeroLineStyle:function(){return{top:this.tp(0)}},valueColorName:function(){var e="";if(this.ranges)for(var t=0,r=Object.entries(this.ranges);t<r.length;t++){var o=Object(n.a)(r[t],2),l=o[0],c=o[1],d=this.percentToNumber(c);if(d*this.value>0&&Math.abs(this.value)<=Math.abs(d)){if(e&&Math.abs(this.ranges[e])<Math.abs(d))continue;e=l}}return e}},methods:{bm:function(e){return"".concat((e-this.limits.lower)/this.limits.distance*100,"%")},tp:function(e){return"".concat((this.limits.upper-e)/this.limits.distance*100,"%")},getBarStyle:function(e,t){if(t<e){var r=[t,e];e=r[0],t=r[1]}return{top:this.tp(t),bottom:this.bm(e)}},getAxisStyle:function(e,t){if(t<e){var r=[t,e];e=r[0],t=r[1]}return{top:this.tp(this.percentToNumber(t)),bottom:this.bm(this.percentToNumber(e)),zIndex:100-Math.abs(t||e)}},percentToNumber:function(e){return e<0?-e/100*this.minValue:e/100*this.maxValue}}}),c=(r(220),r(47)),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bar-gauge",class:{selectable:e.selectable,selected:e.selected},on:{click:function(t){return e.$emit("click")}}},[r("div",{staticClass:"bar-chart"},[r("div",{staticClass:"zero-line",style:e.zeroLineStyle}),e._v(" "),r("div",{staticClass:"bar-watt"},[e._l(e.ranges,(function(t,o){return r("div",{key:o,staticClass:"axis vertical",class:"color-"+o,style:e.getAxisStyle(0,t)})})),e._v(" "),r("div",{staticClass:"track vertical",style:e.getBarStyle(e.minValue,e.maxValue)}),e._v(" "),r("div",{staticClass:"bar vertical",class:"color-"+e.valueColorName,style:e.getBarStyle(0,e.value)})],2)]),e._v(" "),r("div",{staticClass:"description-area"},[r("div",[e._v(e._s(e.name))]),e._v(" "),r("div",{staticClass:"value-area",class:"color-"+e.valueColorName},[r("div",{staticClass:"big-value"},[r("div",{staticClass:"space-measure"},[e._v("99 999")]),e._v(" "),r("i18n-n",{staticClass:"display-value",attrs:{value:e.displayValue},scopedSlots:e._u([{key:"group",fn:function(){return[e._v(" ")]},proxy:!0}])})],1),e._v("\n      W\n      "),r("div",{staticClass:"value-label"},[e._v(e._s(e.label))])]),e._v(" "),r("div",{staticClass:"soc-area",style:e.socStyle},[r("div",{staticClass:"track tiny-horizontal"},[r("div",{staticClass:"bar",style:e.socBarStyle})]),e._v("\n      "+e._s(e.soc)+" %\n    ")])]),e._v(" "),r("div",{staticClass:"frame"})])}),[],!1,null,null,null).exports,f=(r(222),{provide:function(){var e=this;return{limits:this.limits,setUpperLimit:function(t,r){void 0!==r&&(e.upperLimitClientMap[t._uid]=r,e.refreshLimits())},setLowerLimit:function(t,r){void 0!==r&&(e.lowerLimitClientMap[t._uid]=r,console.log(t._uid,e.lowerLimitClientMap),e.refreshLimits())}}},data:function(){return{limits:{upper:0,lower:0,distance:0}}},created:function(){this.upperLimitClientMap={},this.lowerLimitClientMap={}},methods:{refreshLimits:function(){this.limits.upper=Object.values(this.upperLimitClientMap).reduce((function(a,b){return Math.max(a,b)}),0),this.limits.lower=Object.values(this.lowerLimitClientMap).reduce((function(a,b){return Math.min(a,b)}),0),this.limits.distance=this.limits.upper-this.limits.lower}}}),m=(r(223),Object(c.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"chart-area"},[this._t("default")],2)}),[],!1,null,null,null).exports),h={stop:"stop",standby:"semistop",chargeImmediate:"jetzt",minPlusPv:"minundpv",onlyPv:"pvuberschuss"},v={0:"chargeImmediate",1:"minPlusPv",2:"onlyPv",3:"stop",4:"standby"},x={components:{BarChart:m,BarGauge:d},data:function(){return{actions:["stop","standby","chargeImmediate","minPlusPv","onlyPv"],lastError:null,staticData:{},ramData:{},charger1Selected:!1,charger2Selected:!0}},computed:{selectedAction:function(){try{return v[this.ramData.lademodus]}catch(e){return null}}},watch:{lastError:function(e){e&&console.error(e)}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshAllData();case 2:setInterval((function(){e.refreshRamData()}),5e3);case 3:case"end":return t.stop()}}),t)})))()},methods:{clickAction:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.lastError=null,r.next=4,t.$axios.post("api/changeChargeMode.php?".concat(h[e],"=1"));case 4:return r.next=6,t.refreshRamData();case 6:r.next=13;break;case 8:r.prev=8,r.t0=r.catch(0),o=r.t0,console.log(o.response.status,o.response.statusText),t.lastError=r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,8]])})))()},refreshAllData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.lastError=null,r=e.$axios.$get("api/staticData.php"),o=e.refreshRamData(),t.next=6,r;case 6:return e.staticData=t.sent,t.next=9,o;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.lastError=t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},refreshRamData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.lastError=null,t.next=4,e.$axios.$get("api/ramData.php");case 4:e.ramData=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.lastError=t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},y=(r(225),Object(c.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",class:{error:!!e.lastError}},[r("bar-chart",[r("bar-gauge",{attrs:{name:e.$t("bars.evu"),value:-e.ramData.wattbezug,positivLabel:e.$t("bars.feedToGrid"),negativLabel:e.$t("bars.drawFromGrid"),"min-value":-e.staticData.displayevumax,"max-value":e.staticData.displayevumax,ranges:{green:100,yellow:-40,red:-100}}}),e._v(" "),r("bar-gauge",{attrs:{name:e.$t("bars.pv"),value:e.ramData.pvwatt,"min-value":0,"max-value":e.staticData.displaypvmax,ranges:{green:100}}}),e._v(" "),r("bar-gauge",{attrs:{name:e.$t("bars.houseBattery"),value:e.ramData.speicherleistung,positivLabel:e.$t("bars.chargeBattery"),negativLabel:e.$t("bars.dischargeBattery"),"min-value":-e.staticData.displayspeichermax,"max-value":e.staticData.displayspeichermax,ranges:{green:100,yellow:-10,red:-100},showSoc:"",soc:e.ramData.speichersoc}}),e._v(" "),r("bar-gauge",{attrs:{name:e.$t("bars.houseConsumption"),value:e.ramData.hausverbrauch,"min-value":0,"max-value":e.staticData.displayhausmax,ranges:{white:100}}}),e._v(" "),r("bar-gauge",{attrs:{name:e.staticData.lp1name,value:e.ramData.llaktuell,selectable:"",selected:e.charger1Selected,positivLabel:e.$t("bars.chargeBattery"),zeroLabel:e.$t("bars.activated"),labelOverride:e.charger1Selected?"":e.$t("bars.deactivated"),"min-value":0,"max-value":e.staticData.displaylp1max,ranges:{green:100},showSoc:"",soc:e.ramData.soc},on:{click:function(t){e.charger1Selected=!e.charger1Selected}}}),e._v(" "),e.staticData.lastmanagement?r("bar-gauge",{attrs:{name:e.staticData.lp2name,value:e.ramData.llaktuells1,selectable:"",selected:e.charger2Selected,positivLabel:e.$t("bars.chargeBattery"),zeroLabel:e.$t("bars.activated"),labelOverride:e.charger2Selected?"":e.$t("bars.deactivated"),"min-value":0,"max-value":e.staticData.displaylp2max,ranges:{green:100},showSoc:"",soc:e.ramData.soc1},on:{click:function(t){e.charger2Selected=!e.charger2Selected}}}):e._e()],1),e._v(" "),r("div",{staticClass:"buttonbar"},e._l(e.actions,(function(t){return r("button",{key:t,class:{selected:t==e.selectedAction},on:{click:function(r){return e.clickAction(t)}}},[e._v(e._s(e.$t("actions."+t)))])})),0)],1)}),[],!1,null,null,null));t.default=y.exports}}]);